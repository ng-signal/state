@use 'global' as global;

.vault-devtools {
  display: flex;
  flex-direction: column;
  padding: global.$spacing-md;
  @include global.ngvault-text(global.$ngvault-text-primary);

  /* ----------------------------------------------
     EVENT STREAM
  ------------------------------------------------*/
  .event-stream {
    flex: 1;
    display: flex;
    flex-direction: column;

    .event-list {
      flex: 1;
      overflow-y: auto;
      padding-right: global.$spacing-xs;

      padding-bottom: max(global.$spacing-xl, 10vh);

      // Optional nice scrollbars
      &::-webkit-scrollbar {
        width: 8px;
      }

      &::-webkit-scrollbar-thumb {
        background-color: global.$ngvault-surface-outline;
        border-radius: global.$border-radius-xs;
      }
    }
  }

  /* ----------------------------------------------
     EVENT ROW
  ------------------------------------------------*/
  .event-row {
    display: block;
    padding: global.$spacing-sm;
    background-color: global.$ngvault-surface-darker;
    border-bottom: 1px solid global.$ngvault-surface-outline;

    &:hover {
      background-color: global.$ngvault-hover-background-color;
    }

    .event-row-header {
      width: 100%;
      display: grid;
      grid-template-columns: 4rem 140px 1fr auto; // Counter | Cell | spacer | Time
      align-items: center;
      gap: global.$spacing-md;

      .badge {
        @include global.ngvault-text(global.$ngvault-text-white, global.$font-weight-semibold);
        font-size: global.$font-size-xs;
        padding: global.$spacing-xs global.$spacing-sm;
        border-radius: global.$border-radius-xs;
        justify-self: start;

        &.init {
          background-color: global.$ngvault-success-base;
        }
        &.patch {
          background-color: global.$ngvault-warn-base;
          color: global.$ngvault-text-black;
        }
        &.error {
          background-color: global.$ngvault-accent-base;
        }
      }

      .counter {
        @include global.ngvault-text(global.$ngvault-text-secondary);
        font-size: global.$font-size-sm;
        width: 3rem;
        text-align: left;
      }

      .cell {
        @include global.ngvault-text(global.$ngvault-text-secondary);
        font-weight: global.$font-weight-medium;
        font-size: global.$font-size-md;
        min-width: 125px;
      }

      .ts {
        @include global.ngvault-text(global.$ngvault-text-secondary);
        font-size: global.$font-size-xs;
        white-space: nowrap;
      }
    }
  }

  /* ----------------------------------------------
     DETAILS (STATE, PAYLOAD, ERROR)
  ------------------------------------------------*/
  .event-details {
    grid-column: 1 / -1;
    margin-top: global.$spacing-xs;
    padding-left: global.$spacing-sm;

    summary {
      cursor: pointer;
      @include global.ngvault-text(global.$ngvault-primary-base);
      font-size: global.$font-size-sm;
      margin-bottom: global.$spacing-xs;

      &:hover {
        text-decoration: underline;
      }
    }

    .detail-block {
      margin-bottom: global.$spacing-md;

      h4 {
        @include global.ngvault-text(global.$ngvault-text-primary, global.$font-weight-semibold);
        font-size: global.$font-size-md;
        margin-bottom: global.$spacing-xs;
      }

      .kv {
        list-style: none;
        padding: 0;
        margin: 0 0 global.$spacing-xs 0;

        li {
          margin-bottom: global.$spacing-xs;
          font-size: global.$font-size-sm;
        }
      }

      pre {
        background-color: global.$ngvault-surface-dark;
        border: 1px solid global.$ngvault-surface-outline;
        border-radius: global.$border-radius-sm;
        padding: global.$spacing-sm;
        font-size: global.$font-size-xs;
        overflow-x: auto;
        color: global.$ngvault-text-primary;
      }
    }

    .error-block {
      pre {
        background-color: global.$ngvault-accent-dark;
        border-color: global.$ngvault-accent-light;
      }
    }
  }
}
