@use 'sass:map';
@use '@angular/material' as mat;
@use 'global' as global;

// =====================================================
// ✅ ngVault Material v19 (M2 API) — Canonical Fix
// =====================================================

// 1️⃣ Define Typography Config
$ngvault-typography: mat.m2-define-typography-config(
  (
    font-family: global.$ngvault-font-family,
    body-1: (
      font-size: global.$ngvault-font-size,
      font-weight: global.$ngvault-font-weight,
      line-height: global.$line-height,
      letter-spacing: 0
    ),
    headline-5: (
      font-size: global.$ngvault-font-size,
      font-weight: global.$ngvault-font-weight,
      line-height: global.$line-height,
      letter-spacing: 0
    )
  )
);

// 2️⃣ Define Color Palettes (M2 palettes)
$ngvault-primary-palette: mat.m2-define-palette(
  (
    100: global.$ngvault-primary-light,
    500: global.$ngvault-primary-base,
    700: global.$ngvault-primary-dark,
    contrast: (
      100: global.$ngvault-text-black,
      500: global.$ngvault-text-white,
      700: global.$ngvault-text-white
    )
  )
);

$ngvault-accent-palette: mat.m2-define-palette(
  (
    100: global.$ngvault-accent-light,
    500: global.$ngvault-accent-base,
    700: global.$ngvault-accent-dark,
    contrast: (
      100: global.$ngvault-text-black,
      500: global.$ngvault-text-white,
      700: global.$ngvault-text-white
    )
  )
);

$ngvault-warn-palette: mat.m2-define-palette(
  (
    100: global.$ngvault-warn-light,
    500: global.$ngvault-warn-base,
    700: global.$ngvault-warn-dark,
    contrast: (
      100: global.$ngvault-text-black,
      500: global.$ngvault-text-black,
      700: global.$ngvault-text-white
    )
  )
);

// 3️⃣ Define the Theme (⚠️ No typography key here!)
$ngvault-theme: mat.m2-define-light-theme(
  (
    color: (
      primary: $ngvault-primary-palette,
      accent: $ngvault-accent-palette,
      warn: $ngvault-warn-palette
    ),
    typography: $ngvault-typography,
    density: 0
  )
);

// 4️⃣ Apply Theme & Typography
html {
  // Color + density tokens
  @include mat.theme($ngvault-theme);
  @include mat.all-component-colors($ngvault-theme);
  @include mat.all-component-densities($ngvault-theme);

  // @include mat.typography-hierarchy($ngvault-typography);
}
