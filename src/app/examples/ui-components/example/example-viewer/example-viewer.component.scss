@use 'global' as global;

// ===============================================
// ngVault Example Viewer Wrapper
// ===============================================

.example-viewer-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 1024px;
  height: 600px;
  margin: 0 auto; // keep it centered
  transition:
    width 0.3s ease,
    height 0.3s ease;

  margin: global.$spacing-md 0;
  border-radius: global.$border-radius-lg;
  overflow: hidden;

  // Use theme variables so this auto-updates between light/dark
  background-color: var(--surface-bg, global.$ngvault-surface-light);
  color: var(--surface-text, global.$ngvault-text-black);
  border: 1px solid var(--surface-outline, global.$ngvault-primary-light);
  box-shadow: var(--vault-shadow, global.$ngvault-shadow-base);

  .example-viewer-source-container {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transform: translateY(-4px);
    will-change: max-height, opacity, transform;
    transition:
      max-height 0.45s ease,
      opacity 0.35s ease,
      transform 0.45s ease;

    &.visible {
      max-height: 2000px;
      opacity: 1;
      transform: translateY(0);

      /* this one line is magic */
      transition-delay: 0s, 0.05s, 0s; // delay only opacity
    }

    // Make sure inner content doesn't jitter
    ngvault-example-viewer-source {
      display: block;
      padding: global.$spacing-md;
      background-color: var(--surface-bg, global.$ngvault-surface-light);
      border-top: 1px solid var(--surface-outline, global.$ngvault-primary-light);
      transition: background-color 0.3s ease;
    }
  }

  transition:
    background-color 0.3s ease,
    color 0.3s ease,
    box-shadow 0.2s ease;

  // Add depth on hover
  &:hover {
    @include global.ngvault-elevate(hover);
  }

  // The header and body components stack inside this wrapper

  .example-viewer-body {
    overflow: hidden;
    max-height: 2000px;
    opacity: 1;
    transform: translateY(0);
    padding: global.$spacing-xs;
    background-color: var(--surface-bg, global.$ngvault-surface-light);
    color: var(--surface-text, global.$ngvault-text-primary);

    transition:
      max-height 0.45s ease,
      opacity 0.35s ease,
      transform 0.45s ease,
      background-color 0.3s ease,
      color 0.3s ease;

    &.visible {
      max-height: 2000px;
      opacity: 1;
      transform: translateY(0);
    }

    &:not(.visible) {
      max-height: 0;
      opacity: 0;
      transform: translateY(-4px);
      transition-delay: 0s, 0.05s, 0s; // same "magic line" for smooth fade
    }
  }

  /* --------------------------------------
     Small screens (large phones / small tablets)
     -------------------------------------- */
  @media (max-width: 768px) {
    max-width: 100%;
    width: 95vw;
    height: 480px;
    border-radius: global.$border-radius-md;

    ngvault-example-viewer-body {
      padding: global.$spacing-sm;
    }
  }

  /* --------------------------------------
     Extra small (phones)
     -------------------------------------- */
  @media (max-width: 480px) {
    max-width: 100%;
    width: 100vw;
    height: auto; // let content dictate height
    padding: 0 global.$spacing-sm; // optional breathing room
  }

  /* Optional: very large monitors */
  @media (min-width: 1440px) {
    max-width: 1200px;
    width: 100%;
    height: 640px;
  }
}
